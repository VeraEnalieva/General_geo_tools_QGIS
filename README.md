# Инструменты под QGIS
## _набор разнообразных самостоятельных полезностей_

[![N|Solid](https://cldup.com/dTxpPi9lDf.thumb.png)](https://nodesource.com/products/nsolid)

[![Build Status](https://travis-ci.org/joemccann/dillinger.svg?branch=master)](https://travis-ci.org/joemccann/dillinger)

Запускаются из-под Python консоли в QGIS.

Как запустить:
- Откройте приложение QGIS
- В верхнем меню значок Консоль Python. Появится окно консоли
- В меню консоли занчок Редактор -> Открыть сценарий.
- Выберите файл скрипта. При необходимости укажите пользовательские параметры. В каждом скрипте они находятся под строками #USER_SETTING_1,  #USER_SETTING_2 и т.д.
- Для запуска нажмите кнопуке Play = зелёный треугольник/
- ✨ Magic ✨

## CompareSourceTAB_Data

> Инструмент сравнивает два набора TAB файлов;
> На вход принимает от пользователя два пути к папкам: со старыми табами, и с новыми (# USER_SETTING_1 и # USER_SETTING_2  );
- Анализирует набор файлов по составу и названиям;
- Анализирует изменения геометрии объектов;
- Анализирует изменения в атрибутах объектов;
- Учитывает то, что таб может содержать разные типы геометрии, в том числе объекты без геометрии;
- Исходные файлы не меняет;
- При анализе очередного слоя спрашивает у пользователя, какие геометрии брать; Таким образом, можно не обрабатывать заведомо неиспользуемые объекты;
- Преполагается, что при загрузке у пользователя выключена галочка "Добавить слои в группу". Если галочка будет стоять, то слои не будут проанализированы;
  Эту возможность можно использовать, чтобы исключить те или иные слои из обработки;
- Результат анализа сохраняет в файл _Comparation.txt в папке с новыми данными;
- Обновлённые объекты сохраняет в файлы *_updated.gpkg;
- Новые объекты и удалённые сохраняет в файлы *_added.gpkg  и *_deleted.gpkg;
- Можно сравнивать не только данные от КИО, но и любые другие наборы таб-файлов;
- Время обработки для 45 слоёв около 45 минут;


## ConvertSIDTAB2jpg
> - Конвертирует все SID файлы в папке без привязки в JPG c привязкой. При условии, что рядом с SID лежат TAB
> - В USER_SETTINGS_1 надо указать путь, где лежат исходные файлы

## Data2GDB
> - Конвертирует все данные из проекта в одну GDB;
> - Добавляет к названию слоя постфикс point, area, line, noGeometry;
> - Присваивает проекцию МСК-64. Предполагается, что все исходные имеено в ней. Если не так, то в my_crs.createFromProj4 надо переписать другую;
> - Конвертирует все гео слои в gpkg;
> - Объединяет все гео слои в единый gpkg;
> - Конвертирует все гео слои с один GDB;
> - Пользовательская настройка одна - os.chdir - путь к выходным файлам.
